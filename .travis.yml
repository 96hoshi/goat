language: generic
sudo: required
dist: trusty
services:
  - docker
branches:
  only:
    - master
    - development
    - test_travis
before_script:
  - chmod -R a+x scripts
script:
  - make release-docker-image -e COMPONENT=client
  - make release-docker-image -e COMPONENT=api
after_success:
  - ./scripts/after-success.sh
notifications:
  email:
    on_success: never
    on_failure: always
